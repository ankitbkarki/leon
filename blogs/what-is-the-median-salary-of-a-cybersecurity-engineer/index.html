<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Cybersecurity Engineer Median Salary</title><meta name="description" content="Discover the median salary of a cybersecurity engineer in 2025, including factors like experience, specialization, certifications, industry, and location. Learn how much you can earn in this fast-growing field and what influences salary growth over time."><meta name="generator" content="Publii Open-Source CMS for Static Site"><script type="text/javascript" async src="https://www.googletagmanager.com/gtag/js?id=G-1YSV5NS6SN"></script><script type="text/javascript">window.dataLayer = window.dataLayer || [];
				  function gtag(){dataLayer.push(arguments);}
				  gtag('js', new Date());
				  gtag('config', 'G-1YSV5NS6SN' );</script><link rel="canonical" href="https://leonstaff.com/blogs/what-is-the-median-salary-of-a-cybersecurity-engineer/"><link rel="alternate" type="application/atom+xml" href="https://leonstaff.com/blogs/feed.xml" title="Leon Consulting Blog - RSS"><link rel="alternate" type="application/json" href="https://leonstaff.com/blogs/feed.json" title="Leon Consulting Blog - JSON"><meta property="og:title" content="What is the Median Salary of a Cybersecurity Engineer?"><meta property="og:image" content="https://leonstaff.com/blogs/media/posts/8/What-is-the-Median-Salary-of-a-Cybersecurity-Engineer-2.webp"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="675"><meta property="og:site_name" content="Leon Consulting Blog"><meta property="og:description" content="Discover the median salary of a cybersecurity engineer in 2025, including factors like experience, specialization, certifications, industry, and location. Learn how much you can earn in this fast-growing field and what influences salary growth over time."><meta property="og:url" content="https://leonstaff.com/blogs/what-is-the-median-salary-of-a-cybersecurity-engineer/"><meta property="og:type" content="article"><link rel="preload" href="https://leonstaff.com/blogs/assets/dynamic/fonts/inter/inter.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://leonstaff.com/blogs/assets/dynamic/fonts/inter/inter-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://leonstaff.com/blogs/assets/css/style.css?v=7ddcc1993dc40afaced990f8f62028c4"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://leonstaff.com/blogs/what-is-the-median-salary-of-a-cybersecurity-engineer/"},"headline":"What is the Median Salary of a Cybersecurity Engineer?","datePublished":"2025-04-29T10:33-05:00","dateModified":"2025-05-02T12:30-05:00","image":{"@type":"ImageObject","url":"https://leonstaff.com/blogs/media/posts/8/What-is-the-Median-Salary-of-a-Cybersecurity-Engineer-2.webp","height":675,"width":1200},"description":"Discover the median salary of a cybersecurity engineer in 2025, including factors like experience, specialization, certifications, industry, and location. Learn how much you can earn in this fast-growing field and what influences salary growth over time.","author":{"@type":"Person","name":"Leon","url":"https://leonstaff.com/blogs/authors/leon-staff-team/"},"publisher":{"@type":"Organization","name":"Leon","logo":{"@type":"ImageObject","url":"https://leonstaff.com/blogs/media/website/logo.png","height":100,"width":250}}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7656339654245336" crossorigin="anonymous"></script></head><body class="post-template"><header class="header" id="js-header"><a href="https://leonstaff.com/blogs/" class="logo"><img src="https://leonstaff.com/blogs/media/website/logo.png" alt="Leon Consulting Blog" width="250" height="100"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://leonstaff.com" target="_self">HOME</a></li><li><a href="https://leonstaff.com/#services" target="_self">SERVICES</a></li><li><a href="https://leonstaff.com/#about" target="_self">ABOUT</a></li><li><a href="https://leonstaff.com/#contact" target="_self">CONTACT</a></li><li><a href="https://leonstaff.com/#faq" target="_self">F&amp;Q</a></li></ul></nav></header><main class="post"><div class="wrapper"><article class="content"><header class="content__header"><a href="https://leonstaff.com/blogs/tags/cybersecurity/" class="content__maintag">Cybersecurity</a><h1 class="content__title">What is the Median Salary of a Cybersecurity Engineer?</h1><div class="content__posted-date"><time datetime="2025-04-29T10:33">April 29, 2025</time></div></header><figure class="content__featured-image"><img src="https://leonstaff.com/blogs/media/posts/8/What-is-the-Median-Salary-of-a-Cybersecurity-Engineer-2.webp" height="675" width="1200" alt="What is the Median Salary of a Cybersecurity Engineer"><figcaption>What is the Median Salary of a Cybersecurity Engineer</figcaption></figure><div class="content__inner"><div class="content__entry"><p data-start="406" data-end="804">So, you're thinking about cybersecurity engineering‚Äîor maybe you‚Äôre already in the field and just curious about the numbers. How much can you actually make in this job? Is it worth all the learning and certifications? Let‚Äôs dive into this whole salary thing, and I‚Äôll try to make it a little more realistic and less "statistical report-y." You know, just like a regular person would chat about it.</p><div class="post__toc"><h3>Table of Contents</h3><ul><li><a href="#mcetoc_1iq90olbtel">The Quick Answer: What‚Äôs the Median Salary?</a></li><li><a href="#mcetoc_1iq90olbtem">What Does ‚ÄúMedian‚Äù Actually Mean?</a></li><li><a href="#mcetoc_1iq90olbten">Breaking Down Salary Factors</a><ul><li><a href="#mcetoc_1iq90olbteo">Experience: The Obvious Factor</a></li><li><a href="#mcetoc_1iq90olbtep">Specialization: More Focus, More Pay?</a></li><li><a href="#mcetoc_1iq90olbteq">Certifications: Are They Really Worth It?</a></li><li><a href="#mcetoc_1iq90olbter">Industry: Where You Work Matters</a></li><li><a href="#mcetoc_1iq90olbtes">Location, Location, Location</a></li></ul></li><li><a href="#mcetoc_1iq90olbtet">Global Salary Variations</a></li><li><a href="#mcetoc_1iq90olbteu">How Much Can You Actually Earn?</a></li><li><a href="#mcetoc_1iq90olbtev">Is It Worth It?</a></li></ul></div><h4 id="mcetoc_1iq90olbtel" data-start="806" data-end="854">The Quick Answer: What‚Äôs the Median Salary?</h4><p data-start="856" data-end="1348">Okay, let‚Äôs start with the headline. According to recent data, the median salary for a cybersecurity engineer in the U.S. is about $185,000 per year. Sounds pretty good, right? But‚Äîand this is a big but‚Äîthat number is just the median. Which means half of cybersecurity engineers make more than that, and half make less. So, it‚Äôs a helpful benchmark, but not the whole picture. If you‚Äôre a newbie, you‚Äôre not going to land that salary right off the bat. But, yeah, that‚Äôs something to aim for.</p><h4 id="mcetoc_1iq90olbtem" data-start="1350" data-end="1388">What Does ‚ÄúMedian‚Äù Actually Mean?</h4><p data-start="1390" data-end="1880">Alright, I probably should have mentioned this earlier, but let‚Äôs quickly talk about what ‚Äúmedian‚Äù means here. Median salary refers to the middle value when you line up all the salaries of cybersecurity engineers from lowest to highest. It‚Äôs different from the average, which can get skewed if a few people at the top are making, like, a crazy amount. Median is more of a ‚Äúmiddle ground‚Äù number, which is kind of useful when you're thinking about what‚Äôs typical for most people in the role.</p><h4 id="mcetoc_1iq90olbten" data-start="1882" data-end="1915">Breaking Down Salary Factors</h4><p data-start="1917" data-end="2212">Here‚Äôs where things start getting interesting. Salary for cybersecurity engineers isn‚Äôt a simple one-size-fits-all situation. There are a few things that can push your salary up or down, and I think it‚Äôs important to keep that in mind, especially if you‚Äôre just starting to research this career.</p><h5 id="mcetoc_1iq90olbteo" data-start="2214" data-end="2250">Experience: The Obvious Factor</h5><p data-start="2252" data-end="2741">You probably guessed it, but experience plays a huge role. If you're just starting out, maybe fresh out of college or with a few years of experience, you‚Äôre probably going to start at a lower range‚Äîsomewhere around $70,000 to $90,000 annually. But‚Äîand here‚Äôs the kicker‚Äîthe more experience you gain, the higher your salary can go. A senior-level cybersecurity engineer with, say, 10+ years of experience could easily be earning six figures‚Äîupwards of $150,000 to $200,000 per year or more.</p><p data-start="2743" data-end="2948">I guess this part is obvious, but it‚Äôs kind of reassuring to know that the salary potential increases with experience. So, even if you're not at that high number right now, there‚Äôs definitely room to grow.</p><h5 id="mcetoc_1iq90olbtep" data-start="2950" data-end="2993">Specialization: More Focus, More Pay?</h5><p data-start="2995" data-end="3459">It‚Äôs also worth mentioning that cybersecurity is a pretty broad field. So, depending on what area you specialize in, you might make more‚Äîor less. For example, if you're focusing on areas like penetration testing or ethical hacking, you‚Äôre likely to make a little more than someone who‚Äôs working in more general network security. But there‚Äôs a catch here. Specializations often require you to learn more specific tools or techniques, and that takes time and effort.</p><p data-start="3461" data-end="3760">On the other hand, if you‚Äôre the kind of person who thrives on variety and likes the challenge of keeping up with evolving technologies, general cybersecurity roles can still be pretty rewarding. There‚Äôs no one-size-fits-all answer here, which is a bit frustrating but also kind of freeing in a way.</p><h5 id="mcetoc_1iq90olbteq" data-start="3762" data-end="3809">Certifications: Are They Really Worth It?</h5><p data-start="3811" data-end="4229">Okay, certifications. People love to talk about these, don‚Äôt they? And yes, they can absolutely help boost your salary, especially if you're aiming for a higher-paying job. Certifications like CISSP (Certified Information Systems Security Professional), CEH (Certified Ethical Hacker), and CISM (Certified Information Security Manager) are some of the most recognized and can give you a leg up in salary negotiations.</p><p data-start="4231" data-end="4677">But here‚Äôs the thing: certifications can be expensive and time-consuming. They require studying, testing, and sometimes even years of experience in the field before you can even qualify for them. So, I guess the real question is: are they worth it? Well, if you‚Äôre planning to move up the ladder or specialize, the short answer is ‚Äúprobably.‚Äù But, if you're content with your current role or just starting out, you might not need them right away.</p><h5 id="mcetoc_1iq90olbter" data-start="4679" data-end="4717">Industry: Where You Work Matters</h5><p data-start="4719" data-end="5150">Let‚Äôs talk about industry for a second. Not all industries pay the same. For example, if you're working in a big finance company, healthcare organization, or a government agency, you‚Äôre probably going to see a higher salary than if you‚Äôre working for a smaller company. That‚Äôs because industries that handle sensitive data, like personal information or financial records, are often willing to pay more to keep their systems secure.</p><p data-start="5152" data-end="5375">It‚Äôs not just about the size of the company, either. Some sectors just have a bigger budget for cybersecurity than others. So, if you‚Äôre someone who‚Äôs driven by financial rewards, going into one of those sectors might help.</p><h5 id="mcetoc_1iq90olbtes" data-start="5377" data-end="5411">Location, Location, Location</h5><p data-start="5413" data-end="5852">Location is another big factor that influences salary. If you‚Äôre living in a tech hub like San Francisco or New York City, expect to see higher salaries compared to, say, a smaller town or rural area. The catch here, of course, is that the cost of living in these places is usually much higher too. So, while you might be getting paid more, you‚Äôll also be paying more for rent, groceries, and so on. It‚Äôs kind of a balancing act, isn‚Äôt it?</p><p data-start="5854" data-end="6193">That said, there are plenty of places outside of the typical ‚Äútech cities‚Äù where salaries are still competitive. And with remote work becoming more common in the cybersecurity space, you might not even need to live in a high-cost city to earn a decent salary. It‚Äôs worth considering where you want to live in relation to what you can earn.</p><h4 id="mcetoc_1iq90olbtet" data-start="6195" data-end="6224">Global Salary Variations</h4><p data-start="6226" data-end="6663">If you‚Äôre thinking about cybersecurity from a global perspective, salaries vary even more. In the United Kingdom, for example, the median salary for a cybersecurity engineer is around ¬£65,000 (which is roughly $85,000 in U.S. dollars). In Germany, you‚Äôre looking at about ‚Ç¨80,000 (around $90,000 USD). So, yeah, there‚Äôs a noticeable difference between countries, and that‚Äôs something to keep in mind if you‚Äôre considering working abroad.</p><p data-start="6665" data-end="6917">But there‚Äôs also something kind of nice about this. If you're open to working remotely, you might find that certain countries pay more for cybersecurity engineers, which could offer you the flexibility to earn a good salary without needing to relocate.</p><h4 id="mcetoc_1iq90olbteu" data-start="6919" data-end="6955">How Much Can You Actually Earn?</h4><p data-start="6957" data-end="7135">To give you a sense of what‚Äôs possible in the field, here‚Äôs a bit of a salary range breakdown (these numbers are estimates and can vary depending on the factors we just covered):</p><ul data-start="7137" data-end="7357"><li data-start="7137" data-end="7217"><p data-start="7139" data-end="7217"><strong data-start="7139" data-end="7180">Entry-Level (0‚Äì3 years of experience)</strong>: Around $70,000 to $90,000 per year.</p></li><li data-start="7218" data-end="7289"><p data-start="7220" data-end="7289"><strong data-start="7220" data-end="7259">Mid-Level (3‚Äì5 years of experience)</strong>: Around $100,000 to $130,000.</p></li><li data-start="7290" data-end="7357"><p data-start="7292" data-end="7357"><strong data-start="7292" data-end="7333">Senior-Level (5+ years of experience)</strong>: $150,000 to $200,000+.</p></li></ul><p data-start="7359" data-end="7504">And, of course, if you're in a high-demand area with specialized skills, you might even see salaries go beyond that. It‚Äôs kind of wild, actually.</p><h4 id="mcetoc_1iq90olbtev" data-start="7506" data-end="7526">Is It Worth It?</h4><p data-start="7528" data-end="7866">Here‚Äôs the thing: Becoming a cybersecurity engineer is a rewarding career, both intellectually and financially. The job pays well, especially as you gain experience, and there are so many ways to specialize and grow. The field is expected to continue growing, too, so demand for skilled professionals will likely keep pushing salaries up.</p><p data-start="7868" data-end="8230">That said, the path to a high-paying cybersecurity career isn‚Äôt always a straight shot. You‚Äôll need to invest in learning the right skills, getting the right certifications, and possibly relocating to a tech hub or specialized industry. But if you‚Äôre into problem-solving, security, and the thrill of keeping data safe, I think it‚Äôs definitely worth considering.</p></div><footer><p class="content__last-updated"><time datetime="2025-05-03T02:06">This article was updated on May 3, 2025</time></p><nav class="content__nav"><div class="content__nav__prev"><a class="content__nav__link" href="https://leonstaff.com/blogs/best-cybersecurity-stocks-in-may-2025-whats-worth-watching-now/" rel="prev">Previous Post<h3 class="h6">Best Cybersecurity Stocks in May 2025: What‚Äôs Worth Watching Now</h3></a></div><div class="content__nav__next"><a class="content__nav__link" href="https://leonstaff.com/blogs/how-to-remove-onedrive-from-the-file-explorer-sidebar-in-windows-1011/" rel="prev">Next Post<h3 class="h6">How to Remove OneDrive from the File Explorer Sidebar in Windows 10/11</h3></a></div></nav></footer></div></article></div></main><footer class="footer"><nav><ul class="footer__nav"><li class="footer__nav-item"><a href="https://leonstaff.com" target="_self">HOME</a></li><li class="footer__nav-item"><a href="https://leonstaff.com/#services" target="_self">SERVICES</a></li><li class="footer__nav-item"><a href="https://leonstaff.com/#about" target="_self">ABOUT</a></li><li class="footer__nav-item"><a href="https://leonstaff.com/#contact" target="_self">CONTACT</a></li><li class="footer__nav-item"><a href="https://leonstaff.com/#faq" target="_self">F&amp;Q</a></li></ul></nav><div class="footer__copyright">Powered by Leon Consulting Corporation</div></footer><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://leonstaff.com/blogs/assets/js/scripts.min.js?v=1b09dc64eb6086ddc9720890661ff038"></script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="#not-specified">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. <a href="#not-specified">More details...</a></div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Required</summary></details><div class="pcb__popup__switch is-checked"><input type="checkbox" data-group-name="" id="pcb-group-0" checked="checked"> <label for="pcb-group-0">Required</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('üç™ Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('üç™ Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('üç™ Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && (!cbConfig.initialLsState || cbConfig.initialLsState.indexOf(allowedGroup) === -1)) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('üç™ GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('üç™ Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('üç™ Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>